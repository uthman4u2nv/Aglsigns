<div class="row">
    <!-- [ Typography ] start -->
    <div class="col-sm-12">
        <app-card cardTitle="Transactions">
            <div class="row g-1">
                <div class="row">
                    <div class="col-6"></div>
                    <div class="col-6 text-end"></div>
                </div>

                <div class="col-md-12 mb-3">

                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>DATE.</th>
                                    <!--<th>ADDRESS</th>-->
                                    <th>CUSTOMER</th>                                   
                                    <th>AMOUNT</th>
                                    <th>PROCESSED BY</th>
                                    <th>ACTION</th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (t of trans; track t; let i=$index) {
                                <tr>
                                    <td>{{i+1}}</td>
                                    <td>
                                        {{t.created_at | date:'medium'}}
                                        <!--<a href="javascript:"
                                            (click)="OpenEdit(s.sitename,s.address,s.size,s.gps,s.price,s.status,s.siteid)"
                                            class="text-muted">{{ s.sitename }}</a>-->
                                        <!-- <a href="javascript:" class="text-muted">{{ s.sitename }}</a>-->
                                    </td>
                                    <td>{{ t.bookings.customers.name }}</td>
                                    <td>{{t.amount | currency:'N'}}</td>
                                    <td>{{t.enteredBy}}</td>
                                    <td><a href="javascript:" (click)="OpenReceipt(t.transID,t.created_at,t.bookings.customerID,t.amount)"
                                        class="text-muted">Print Receipt</a></td>
                                    
                                   
                                </tr>
                                }
                                <tr>
                                    <td colspan="3" class="text-end">TOTAL</td>
                                    <td class="text-start"><strong>{{totalPaid | currency:'N'}}</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </app-card>

    </div>
    <!-- [ Typography ] end -->
</div>
<dialog id="dialog" #receiptmodal>
    <h4 class="text-center text-primary mb-4 fw-semibold">
        OFFICIAL RECEIPT
    </h4>
    <hr />
    <div class="receipt-wrap" id="receipt-wrap">
        <div class="card">
            <div class="card-header">
                <div class="logo" aria-hidden="true">
                    <!-- local logo path you uploaded -->
                    <img src="../../../../assets/images/agllogo.png" alt="AGL Signs Logo" />
                </div>

                <div class="company">
                    <h1>AGL Signs Ltd</h1>
                    <p>Murg Plaza, Aea 10, Garki, Abuja<br />Email: info&#64;aglsins.com.ng·
                       <br /> Phone: +234 803 251 8766</p>
                </div>

                <div class="meta" role="status" aria-label="receipt summary">
                    <div class="tag">RECEIPT</div>
                    <p style="margin-top:10px"><strong>Receipt #</strong> <span
                            style="display:block;font-weight:700;color:var(--text)">{{transID}}</span></p>
                    <p><strong>Date</strong> <br /><span style="display:block">{{transDate | date:'medium'}}</span></p>
                </div>
            </div>

            <div class="card-body">
                <div class="bill-to">
                    <div class="bill-item">
                        <h3>Bill To</h3>
                        <p><strong>{{customerName}}</strong><br />{{customerAddress}}<br />{{customerEmail}}<br />{{customerPhone}}
                        </p>
                    </div>

                    <div class="bill-item" style="text-align:right;">
                        <h3>Payment Method</h3>
                        <p>{{methodName}}
                            <br />Transaction: <span style="font-weight:700">TRX-987654</span>
                        </p>
                        <p style="margin-top:10px"><strong>Due Date</strong><br />{{transDate | date:'medium'}}</p>
                    </div>
                </div>

                <table class="items" aria-labelledby="items-heading">
                    <thead>
                        <tr>
                            <th>Item / Description</th>
                            <th class="qty">Qty</th>

                            <th class="line-total">Line Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Payment for Advert — {{locationname}} from {{startDate}} - {{endDate}}</td>
                            <td class="qty">1</td>

                            <td class="line-total">{{amount | currency:'₦'}}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td class="qty"></td>
                        
                            <td class="line-total">{{amount | currency:'₦'}}</td>
                        </tr>

                    </tbody>
                </table>

                <!--<div class="totals" aria-hidden="true">
                    <div class="totals-table" role="table" aria-label="totals">
                        
                        <div class="row total"><span>Total Paid</span><span>{{amount | currency:'₦'}}</span></div>
                    </div>
                </div>-->

                <div class="notes">
                    <strong>Notes:</strong>
                    <p>Thank you for your business. This receipt confirms payment received for Advert at —
                        {{locationname}} from {{startDate}} - {{endDate}}.
                        Refunds are subject to our terms and conditions. Contact support at
                        info&#64;aglsigns.com.ng for inquiries.</p>
                </div>
            </div>

            <div class="footer">
                <div>
                    <strong>Invoice ID:</strong> {{transID}}<br />
                    <small style="color:var(--muted)">Powered by C-Digitech Solutions Ltd</small>
                </div>
                <div>
                    <small style="color:var(--muted)">Prepared on <!-- JS will fill --> <span
                            id="preparedOn"></span></small>
                </div>
            </div>
        </div>
    </div>

    <button class="btn btn-primary text-end" (click)="closeReceipt()">Close</button> &nbsp;
    <button class="btn btn-success" (click)="onPrint('receipt-wrap')">Print</button>
    <hr />
</dialog>